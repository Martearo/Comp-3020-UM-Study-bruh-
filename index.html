<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Fixed Top Image</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>


    <div class="header">
      <div class="searchbar-overlay">
        <button class="hamburger" aria-label="Menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <div class="logo">Undecided Website Name!<span class="star">*</span></div>
        <form class="searchbar-form">
          <div class="search-input-wrapper">
            <svg class="search-icon" viewBox="0 0 24 24" width="18" height="18"><circle cx="11" cy="11" r="8" stroke="none" fill="#666"/><path d="M21 21l-4.35-4.35" stroke="#666" stroke-width="2" stroke-linecap="round"/></svg>
            <input class="searchbar-input" type="text" placeholder="things to do, nail salons, plumber">
          </div>
          <div class="searchbar-divider"></div>
          <input class="searchbar-location" type="text" placeholder="Winnipeg, MB">
          <button class="sort-btn" type="button">Sort</button>
        </form>
      </div>
    </div>

    <div class="main-container">
      <div class="map-section">
        <div class="map-container">
          <div class="image-container" id="imageContainer">
            <img src="image.png" alt="Banner Image" id="panZoomImage" draggable="false">
          </div>
          <div class="map-controls">
            <button class="map-button" id="zoomIn" aria-label="Zoom In">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              <span>Zoom In</span>
            </button>
            <button class="map-button" id="zoomOut" aria-label="Zoom Out">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              <span>Zoom Out</span>
            </button>
            <button class="map-button" id="resetView" aria-label="Reset View">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"></path>
                <rect x="6" y="6" width="12" height="12" rx="2"></rect>
              </svg>
              <span>Reset View</span>
            </button>
          </div>
        </div>
      </div>

      <div class="content" id="buildingsList">
        <!-- Buildings will be populated by JavaScript -->
      </div>
    </div>
    <script src="js/buildings.js"></script>
    <script>
      const container = document.getElementById('imageContainer');
      const image = document.getElementById('panZoomImage');
      
  let isDragging = false;
  let startX, startY, translateX = 0, translateY = 0;
  let scale = 1.0;
  let minScale = 0.5;
  let maxScale = 3.0;
  
  // Update transform
  function updateTransform() {
    container.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
  }
  
  // Zoom controls
  document.getElementById('zoomIn').addEventListener('click', () => {
    if (scale < maxScale) {
      scale = Math.min(scale * 1.2, maxScale);
      updateTransform();
    }
  });
  
  document.getElementById('zoomOut').addEventListener('click', () => {
    if (scale > minScale) {
      scale = Math.max(scale / 1.2, minScale);
      updateTransform();
    }
  });
  
  document.getElementById('resetView').addEventListener('click', () => {
    scale = 1.0;
    translateX = 0;
    translateY = 0;
    updateTransform();
  });
      
      // Double click to zoom in/out
      container.addEventListener('dblclick', (e) => {
        e.preventDefault();
        if (!isZoomed) {
          scale = 2;
          isZoomed = true;
        } else {
          scale = 1;
          translateX = 0;
          translateY = 0;
          isZoomed = false;
        }
        updateTransform();
      });

      // Mouse wheel to zoom in/out
      container.addEventListener('wheel', (e) => {
        e.preventDefault();
        const delta = e.deltaY > 0 ? -0.1 : 0.1;
        scale = Math.min(Math.max(1, scale + delta), 3);
        isZoomed = scale > 1;
        updateTransform();
      });

      // Pan functionality
      container.addEventListener('mousedown', (e) => {
        if (scale > 1) {
          isDragging = true;
          startX = e.clientX - translateX;
          startY = e.clientY - translateY;
          container.style.cursor = 'grabbing';
        }
      });

      container.addEventListener('mousemove', (e) => {
        if (isDragging && scale > 1) {
          translateX = e.clientX - startX;
          translateY = e.clientY - startY;
          // Calculate limits based on actual image dimensions and scale
          const containerRect = container.getBoundingClientRect();
          const imageRect = image.getBoundingClientRect();
          // Calculate the scaled dimensions
          const scaledWidth = imageRect.width * scale;
          const scaledHeight = imageRect.height * scale;
          // Calculate maximum allowed translation
          const maxTranslateX = Math.max(0, (scaledWidth - containerRect.width) / 2);
          const maxTranslateY = Math.max(0, (scaledHeight - containerRect.height) / 2);
          // Apply limits
          translateX = Math.min(Math.max(translateX, -maxTranslateX), maxTranslateX);
          translateY = Math.min(Math.max(translateY, -maxTranslateY), maxTranslateY);
          updateTransform();
        }
      });

      container.addEventListener('mouseup', () => {
        isDragging = false;
        container.style.cursor = 'grab';
      });

      container.addEventListener('mouseleave', () => {
        isDragging = false;
        container.style.cursor = 'grab';
      });

      function updateTransform() {
        container.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
      }
    </script>
  </body>
</html>