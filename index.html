<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>UM Campus Map</title>
    <link rel="stylesheet" href="style.css">
    <script src="menu.js"></script>
    <script src="map.js"></script>
    <script src="buildings.js"></script>
  </head>
  <body>


    <div class="side-menu" id="sideMenu">
      <nav class="menu-content">
        <div class="menu-header">
          <button class="close-menu" id="closeMenu" aria-label="Close Menu">×</button>
        </div>
        <button class="menu-button">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2a10 10 0 100 20 10 10 0 000-20z"/>
            <circle cx="12" cy="8" r="3"/>
            <path d="M7 21v-2a4 4 0 014-4h6a4 4 0 014 4v2"/>
          </svg>
          <span>Login / Sign Up</span>
        </button>
        <button class="menu-button">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21l-7-5-7 5V5a2 2 0 012-2h10a2 2 0 012 2z"/>
          </svg>
          <span>Bookmarks</span>
        </button>
        <button class="menu-button">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          <span>My Reviews</span>
        </button>
        <button class="menu-button">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
            <path d="M9 22V12h6v10"/>
          </svg>
          <span>Home</span>
        </button>
      </nav>
    </div>

    <div class="header">
      <div class="searchbar-overlay">
        <button class="hamburger" aria-label="Menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <div class="logo">Undecided Website Name!<span class="star">*</span></div>
        <form class="searchbar-form">
          <div class="search-input-wrapper">
            <svg class="search-icon" viewBox="0 0 24 24" width="18" height="18"><circle cx="11" cy="11" r="8" stroke="none" fill="#666"/><path d="M21 21l-4.35-4.35" stroke="#666" stroke-width="2" stroke-linecap="round"/></svg>
            <input class="searchbar-input" type="text" placeholder="things to do, nail salons, plumber">
          </div>
          <div class="searchbar-divider"></div>
          <input class="searchbar-location" type="text" placeholder="Winnipeg, MB">
          <button class="sort-btn" type="button">Sort</button>
        </form>
      </div>
    </div>

    <div class="main-container">
      <div class="map-section">
        <div class="map-container">
          <div class="image-container" id="imageContainer">
            <img src="image.png" alt="Banner Image" id="panZoomImage" draggable="false">
          </div>
          <div class="map-controls">
            <button class="map-button" id="zoomIn" aria-label="Zoom In">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              <span>Zoom In</span>
            </button>
            <button class="map-button" id="zoomOut" aria-label="Zoom Out">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              <span>Zoom Out</span>
            </button>
            <button class="map-button" id="resetView" aria-label="Reset View">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"></path>
                <rect x="6" y="6" width="12" height="12" rx="2"></rect>
              </svg>
              <span>Reset View</span>
            </button>
          </div>
        </div>
      </div>

      <div class="content" id="buildingsList">
        <!-- Buildings will be populated by JavaScript -->
      </div>
    </div>
    <!-- Add overlay div for the menu background -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- Load external JavaScript files -->
    <script src="js/buildings.js"></script>
    <script type="text/javascript">
      // Buildings list functionality
      async function loadBuildings() {
        try {
          const response = await fetch('data/buildings.json');
          const data = await response.json();
          const buildingsContainer = document.getElementById('buildingsList');
          
          // Clear any existing content
          buildingsContainer.innerHTML = '';

          data.buildings.forEach(building => {
            const button = document.createElement('button');
            button.className = 'wide-button';
            
            // Create the building name element
            const nameSpan = document.createElement('span');
            nameSpan.className = 'building-name';
            nameSpan.textContent = building.name;
            
            // Create the star rating element
            const ratingSpan = document.createElement('span');
            ratingSpan.className = 'building-rating';
            const fullStars = Math.floor(building.rating);
            const hasHalfStar = building.rating % 1 >= 0.5;
            
            // Add full stars
            for (let i = 0; i < fullStars; i++) {
              const star = document.createElement('span');
              star.className = 'star';
              star.textContent = '★';
              ratingSpan.appendChild(star);
            }
            
            // Add half star if needed
            if (hasHalfStar) {
              const halfStar = document.createElement('span');
              halfStar.className = 'star half-star';
              halfStar.textContent = '★';
              ratingSpan.appendChild(halfStar);
            }

            // Add empty stars to make total of 5
            const emptyStars = 5 - Math.ceil(building.rating);
            for (let i = 0; i < emptyStars; i++) {
              const emptyStar = document.createElement('span');
              emptyStar.className = 'star';
              emptyStar.textContent = '☆';
              ratingSpan.appendChild(emptyStar);
            }

            // Create status element
            const statusSpan = document.createElement('span');
            statusSpan.className = `building-status ${building.isOpen ? 'status-open' : 'status-closed'}`;
            statusSpan.textContent = building.isOpen ? 'Open' : 'Closed';
            
            // Add all elements to the button
            button.appendChild(nameSpan);
            button.appendChild(ratingSpan);
            button.appendChild(statusSpan);
            
            buildingsContainer.appendChild(button);
          });
        } catch (error) {
          console.error('Error loading buildings:', error);
        }
      }

      // Initialize everything when DOM is loaded
      document.addEventListener('DOMContentLoaded', () => {
        // Load buildings
        loadBuildings();

        // Menu functionality
        const hamburger = document.querySelector('.hamburger');
        const sideMenu = document.getElementById('sideMenu');
        const closeMenu = document.getElementById('closeMenu');
        const menuOverlay = document.getElementById('menuOverlay');

        function openMenu() {
          sideMenu.classList.add('open');
          menuOverlay.classList.add('visible');
          document.body.style.overflow = 'hidden';
        }

        function closeMenuHandler() {
          sideMenu.classList.remove('open');
          menuOverlay.classList.remove('visible');
          document.body.style.overflow = '';
        }

        hamburger.addEventListener('click', openMenu);
        closeMenu.addEventListener('click', closeMenuHandler);
        menuOverlay.addEventListener('click', closeMenuHandler);

        // Map functionality
        const container = document.getElementById('imageContainer');
        const image = document.getElementById('panZoomImage');
        let isDragging = false;
        let startX, startY, translateX = 0, translateY = 0;
        let scale = 1.0;
        let minScale = 0.5;
        let maxScale = 3.0;

        function updateTransform() {
          container.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
        }

        // Zoom controls
        document.getElementById('zoomIn').addEventListener('click', () => {
          if (scale < maxScale) {
            scale = Math.min(scale * 1.2, maxScale);
            updateTransform();
          }
        });

        document.getElementById('zoomOut').addEventListener('click', () => {
          if (scale > minScale) {
            scale = Math.max(scale / 1.2, minScale);
            updateTransform();
          }
        });

        document.getElementById('resetView').addEventListener('click', () => {
          scale = 1.0;
          translateX = 0;
          translateY = 0;
          updateTransform();
        });

        // Pan functionality
        container.addEventListener('mousedown', (e) => {
          isDragging = true;
          startX = e.clientX - translateX;
          startY = e.clientY - translateY;
          container.style.cursor = 'grabbing';
        });

        container.addEventListener('mousemove', (e) => {
          if (isDragging) {
            translateX = e.clientX - startX;
            translateY = e.clientY - startY;
            updateTransform();
          }
        });

        container.addEventListener('mouseup', () => {
          isDragging = false;
          container.style.cursor = 'grab';
        });

        container.addEventListener('mouseleave', () => {
          isDragging = false;
          container.style.cursor = 'grab';
        });
      });
    </script>
      // Initialize everything when DOM is loaded
      document.addEventListener('DOMContentLoaded', () => {
        try {
          const response = await fetch('data/buildings.json');
          const data = await response.json();
          const buildingsContainer = document.getElementById('buildingsList');
          
          // Clear any existing content
          buildingsContainer.innerHTML = '';

          data.buildings.forEach(building => {
            const button = document.createElement('button');
            button.className = 'wide-button';
            
            // Create the building name element
            const nameSpan = document.createElement('span');
            nameSpan.className = 'building-name';
            nameSpan.textContent = building.name;
            
            // Create the star rating element
            const ratingSpan = document.createElement('span');
            ratingSpan.className = 'building-rating';
            const fullStars = Math.floor(building.rating);
            const hasHalfStar = building.rating % 1 >= 0.5;
            
            // Add full stars
            for (let i = 0; i < fullStars; i++) {
                const star = document.createElement('span');
                star.className = 'star';
                star.textContent = '★';
                ratingSpan.appendChild(star);
            }
            
            // Add half star if needed
            if (hasHalfStar) {
                const halfStar = document.createElement('span');
                halfStar.className = 'star half-star';
                halfStar.textContent = '★';
                ratingSpan.appendChild(halfStar);
            }

            // Add empty stars to make total of 5
            const emptyStars = 5 - Math.ceil(building.rating);
            for (let i = 0; i < emptyStars; i++) {
                const emptyStar = document.createElement('span');
                emptyStar.className = 'star';
                emptyStar.textContent = '☆';
                ratingSpan.appendChild(emptyStar);
            }

            // Create status element
            const statusSpan = document.createElement('span');
            statusSpan.className = `building-status ${building.isOpen ? 'status-open' : 'status-closed'}`;
            statusSpan.textContent = building.isOpen ? 'Open' : 'Closed';
            
            // Add all elements to the button
            button.appendChild(nameSpan);
            button.appendChild(ratingSpan);
            button.appendChild(statusSpan);
            
            buildingsContainer.appendChild(button);
          });
        } catch (error) {
          console.error('Error loading buildings:', error);
        }
      }

      }

      // Initialize everything when DOM is loaded
      document.addEventListener('DOMContentLoaded', () => {
        // Load buildings
        loadBuildings();

        // Menu functionality
      const hamburger = document.querySelector('.hamburger');
      const sideMenu = document.getElementById('sideMenu');
      const closeMenu = document.getElementById('closeMenu');
      const menuOverlay = document.getElementById('menuOverlay');

      function openMenu() {
        sideMenu.classList.add('open');
        menuOverlay.classList.add('visible');
        document.body.style.overflow = 'hidden';
      }

      function closeMenuHandler() {
        sideMenu.classList.remove('open');
        menuOverlay.classList.remove('visible');
        document.body.style.overflow = '';
      }

      hamburger.addEventListener('click', openMenu);
      closeMenu.addEventListener('click', closeMenuHandler);
      menuOverlay.addEventListener('click', closeMenuHandler);

      // Map functionality
      // Load the buildings list
      loadBuildings();

      const container = document.getElementById('imageContainer');
      const image = document.getElementById('panZoomImage');
      
  let isDragging = false;
  let startX, startY, translateX = 0, translateY = 0;
  let scale = 1.0;
  let minScale = 0.5;
  let maxScale = 3.0;
  
  // Update transform
  function updateTransform() {
    container.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
  }
  
  // Zoom controls
  document.getElementById('zoomIn').addEventListener('click', () => {
    if (scale < maxScale) {
      scale = Math.min(scale * 1.2, maxScale);
      updateTransform();
    }
  });
  
  document.getElementById('zoomOut').addEventListener('click', () => {
    if (scale > minScale) {
      scale = Math.max(scale / 1.2, minScale);
      updateTransform();
    }
  });
  
  document.getElementById('resetView').addEventListener('click', () => {
    scale = 1.0;
    translateX = 0;
    translateY = 0;
    updateTransform();
  });
      
      // Double click to zoom in/out
      container.addEventListener('dblclick', (e) => {
        e.preventDefault();
        if (!isZoomed) {
          scale = 2;
          isZoomed = true;
        } else {
          scale = 1;
          translateX = 0;
          translateY = 0;
          isZoomed = false;
        }
        updateTransform();
      });

      // Mouse wheel to zoom in/out
      container.addEventListener('wheel', (e) => {
        e.preventDefault();
        const delta = e.deltaY > 0 ? -0.1 : 0.1;
        scale = Math.min(Math.max(1, scale + delta), 3);
        isZoomed = scale > 1;
        updateTransform();
      });

      // Pan functionality
      container.addEventListener('mousedown', (e) => {
        if (scale > 1) {
          isDragging = true;
          startX = e.clientX - translateX;
          startY = e.clientY - translateY;
          container.style.cursor = 'grabbing';
        }
      });

    <script>
      // Initialize everything when DOM is loaded
      document.addEventListener('DOMContentLoaded', async () => {
        try {
          const response = await fetch('data/buildings.json');
          const data = await response.json();
          const buildingsContainer = document.getElementById('buildingsList');
          // Clear any existing content
          buildingsContainer.innerHTML = '';
          
          data.buildings.forEach(building => {
            const button = document.createElement('button');
            button.className = 'wide-button';
            
            // Create the building name element
            const nameSpan = document.createElement('span');
            nameSpan.className = 'building-name';
            nameSpan.textContent = building.name;
            
            // Create the star rating element
            const ratingSpan = document.createElement('span');
            ratingSpan.className = 'building-rating';
            const fullStars = Math.floor(building.rating);
            const hasHalfStar = building.rating % 1 >= 0.5;
            
            // Add full stars
            for (let i = 0; i < fullStars; i++) {
              const star = document.createElement('span');
              star.className = 'star';
              star.textContent = '★';
              ratingSpan.appendChild(star);
            }
            
            // Add half star if needed
            if (hasHalfStar) {
              const halfStar = document.createElement('span');
              halfStar.className = 'star half-star';
              halfStar.textContent = '★';
              ratingSpan.appendChild(halfStar);
            }
            
            // Add empty stars to make total of 5
            const emptyStars = 5 - Math.ceil(building.rating);
            for (let i = 0; i < emptyStars; i++) {
              const emptyStar = document.createElement('span');
              emptyStar.className = 'star';
              emptyStar.textContent = '☆';
              ratingSpan.appendChild(emptyStar);
            }
            
            // Create status element
            const statusSpan = document.createElement('span');
            statusSpan.className = 'building-status ${building.isOpen ? "open" : "closed"}';
            statusSpan.textContent = building.isOpen ? 'Open' : 'Status-closed';
            
            // Add all elements to button
            button.appendChild(nameSpan);
            button.appendChild(ratingSpan);
            button.appendChild(statusSpan);
            buildingsContainer.appendChild(button);
          });
        } catch (error) {
          console.error('Error loading buildings:', error);
        }
      });
    </script>
  </body>
</html>