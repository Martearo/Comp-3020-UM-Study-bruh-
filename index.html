<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Fixed Top Image</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>

    <div class="top-image">
      <div class="searchbar-overlay">
        <button class="hamburger" aria-label="Menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <div class="logo">yelp<span class="star">*</span></div>
        <form class="searchbar-form">
          <input class="searchbar-input" type="text" placeholder="things to do, nail salons, plumber">
          <div class="searchbar-divider"></div>
          <input class="searchbar-location" type="text" placeholder="Winnipeg, MB">
          <button class="searchbar-btn" type="submit">
            <svg viewBox="0 0 24 24" width="22" height="22" fill="white"><circle cx="11" cy="11" r="8" stroke="none"/><path d="M21 21l-4.35-4.35" stroke="white" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
        </form>
      </div>
      <div class="image-container" id="imageContainer">
        <img src="image.png" alt="Banner Image" id="panZoomImage" draggable="false">
      </div>
    </div>

    <div class="content">
      <button class="wide-button">Button 1</button>
      <button class="wide-button">Button 2</button>
      <button class="wide-button">Button 3</button>
      <button class="wide-button">Button 4</button>
      <button class="wide-button">Button 5</button>
      <button class="wide-button">Button 6</button>
      <button class="wide-button">Button 7</button>
      <button class="wide-button">Button 8</button>
      <button class="wide-button">Button 9</button>
      <button class="wide-button">Button 10</button>
    </div>
    <script>
      const container = document.getElementById('imageContainer');
      const image = document.getElementById('panZoomImage');
      
      let isZoomed = false;
      let isDragging = false;
      let startX, startY, translateX = 0, translateY = 0;
      let scale = 1;
      
      // Double click to zoom in/out
      container.addEventListener('dblclick', (e) => {
        e.preventDefault();
        if (!isZoomed) {
          scale = 2;
          isZoomed = true;
        } else {
          scale = 1;
          translateX = 0;
          translateY = 0;
          isZoomed = false;
        }
        updateTransform();
      });

      // Mouse wheel to zoom in/out
      container.addEventListener('wheel', (e) => {
        e.preventDefault();
        const delta = e.deltaY > 0 ? -0.1 : 0.1;
        scale = Math.min(Math.max(1, scale + delta), 3);
        isZoomed = scale > 1;
        updateTransform();
      });

      // Pan functionality
      container.addEventListener('mousedown', (e) => {
        if (scale > 1) {
          isDragging = true;
          startX = e.clientX - translateX;
          startY = e.clientY - translateY;
          container.style.cursor = 'grabbing';
        }
      });

      container.addEventListener('mousemove', (e) => {
        if (isDragging) {
          translateX = e.clientX - startX;
          translateY = e.clientY - startY;
          
          // Calculate limits based on actual image dimensions and scale
          const containerRect = container.getBoundingClientRect();
          const imageRect = image.getBoundingClientRect();
          
          // Calculate the scaled dimensions
          const scaledWidth = imageRect.width * scale;
          const scaledHeight = imageRect.height * scale;
          
          // Calculate maximum allowed translation
          const maxTranslateX = Math.max(0, (scaledWidth - containerRect.width) / 2);
          const maxTranslateY = Math.max(0, (scaledHeight - containerRect.height) / 2);
          
          // Apply limits
          translateX = Math.min(Math.max(translateX, -maxTranslateX), maxTranslateX);
          translateY = Math.min(Math.max(translateY, -maxTranslateY), maxTranslateY);
          
          updateTransform();
        }
      });

      container.addEventListener('mouseup', () => {
        isDragging = false;
        container.style.cursor = 'grab';
      });

      container.addEventListener('mouseleave', () => {
        isDragging = false;
        container.style.cursor = 'grab';
      });

      function updateTransform() {
        container.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
      }
    </script>
  </body>
</html>